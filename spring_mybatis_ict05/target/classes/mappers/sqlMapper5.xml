<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
 <mapper namespace="com.spring.mvc_mybatis.ch05.dao.UserDAO_ch05">  <!-- namespace="패키지명.인터페이스" -->
	
	
	<!-- 공통사용 -->
	<resultMap id="userMap" type="com.spring.mvc_mybatis.ch05.dto.UserDTO_5">
		<id		property="userId"    column="user_id"/>
		<result property="userName"		column="user_name"/>
		<result property="regDate"		column="reg_date"/>
	</resultMap>
	
	
	<!-- 목록 조회 -->
	<!-- 모든 데이터를 가져오는 것이므로 파라미터 타입은 굳이 안 넣어줘도 됨 -->
	<select id="selectUserList" resultMap="userMap">	<!-- select문의 필수요소 : id, resultMap(Type) -->
		SELECT user_id
		     , user_name
		     , reg_date
		  FROM mvc_user_tbl
		 ORDER BY user_id ASC
	</select>
	
	
	<!-- 1건 조회 -->								<!-- 매핑햇으니 resultMap(DB컬럼명과 DTO멤버변수 명 다르니까 매핑) -->
	<select id="selectUser" parameterType="int" resultMap="userMap">
		SELECT user_id
		     , user_name
		     , reg_date 
		 FROM mvc_user_tbl 
		 WHERE user_id = #{userId}
	</select>
	
	
	<!-- insert 후 목록조회 -->
	<!-- jdbcType : null 값이 들어올 수 있으므로 jdbcType 설치 --><!-- jdbcType=~ : null 체킹(처리)를 하는 것 -->
	<insert id="insertUser" parameterType="com.spring.mvc_mybatis.ch05.dto.UserDTO_5" >
		 INSERT INTO mvc_user_tbl(user_id, user_name, reg_date)
          VALUES(#{userId, jdbcType=NUMERIC}, #{userName, jdbcType=VARCHAR}, #{regDate, jdbcType=DATE})  
	</insert>
	
	
	<!-- update 후 목록조회 -->
	<update id="updateUser" parameterType="com.spring.mvc_mybatis.ch05.dto.UserDTO_5">
		UPDATE mvc_user_tbl
		   SET user_id = #{userId, jdbcType=NUMERIC}
		   	 , user_name = #{userName, jdbcType=VARCHAR}
		   	 , reg_date = #{regDate, jdbcType=DATE}
		 WHERE user_id = #{userId}
	</update>
	
	
	<!-- delete 후 목록조회 -->
	<delete id="deleteUser" parameterType="int">
		DELETE FROM mvc_user_tbl
		    WHERE user_id = #{userId}
	</delete>
	
 </mapper> 
 
 